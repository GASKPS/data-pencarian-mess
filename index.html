<script>
  const SUPABASE_URL = "https://afyqquoxqbnuaijhyszx.supabase.co";
  const SUPABASE_ANON_KEY = "PASTE_KEY_KAMU";

  const supabaseClient = supabase.createClient(
    SUPABASE_URL,
    SUPABASE_ANON_KEY
  );

  async function tampilkanData() {
    const { data, error } = await supabaseClient
      .from("karyawan")
      .select("*");

    const tbody = document.querySelector("#tabel-data tbody");
    tbody.innerHTML = "";

    if (error) {
      tbody.innerHTML = `<tr><td colspan="6">Terjadi kesalahan: ${error.message}</td></tr>`;
      console.error(error);
      return;
    }

    if (!data || data.length === 0) {
      tbody.innerHTML = `<tr><td colspan="6">Data kosong</td></tr>`;
      return;
    }

    data.forEach(row => {
      tbody.innerHTML += `
        <tr>
          <td>${row.nik ?? "-"}</td>
          <td>${row.nama ?? "-"}</td>
          <td>${row.department ?? "-"}</td>
          <td>${row.jabatan ?? "-"}</td>
          <td>${row.block ?? "-"}</td>
          <td>${row.no_kamar ?? "-"}</td>
        </tr>
      `;
    });
  }

  window.onload = tampilkanData;
</script>
